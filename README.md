# GameShop

GameShop - это учебный прототип онлайн-магазина видеоигр, разработанный на Django. Проект позволяет пользователям просматривать каталог игр, регистрироваться,  добавлять игры в корзину, оставлять комментарии,
редактировать свой профиль, имитировать покупку, получать "ключи". Этот pet-project cоздан мной с целью получения практики и выработки умений в программировании на Python c Django, а также REST framework.
Для удобной установки приложения, можно также воспользоваться Docker.

## Установка

### 0. Требования
Python 13

### 1. Клонирование репозитория
Linux
```bash
git clone https://github.com/bazalex1/gameshop.git
cd gameshop
```

```bash
python -m venv venv
venv\Scripts\activate
```

Windows

### 2. Создание виртуального окружения и установка зависимостей

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

настройка ключа в .env????

### 3. Настройка базы данных

Примените миграции для настройки базы данных:

```bash
python manage.py migrate
```

Создайте суперпользователя для доступа к административной панели:

```bash
python manage.py createsuperuser
```

### 4. Сборка статических файлов

Для корректной работы стилей и скриптов необходимо собрать статические файлы:

```bash
python manage.py collectstatic
```

### 5. Настройка конфигурации Nginx и Gunicorn

#### Nginx

Убедитесь, что файл конфигурации Nginx настроен корректно. Пример конфигурации:

```nginx
server {
    listen 80;
    server_name YOUR_SERVER_IP;

    location /static/ {
        alias /root/gameshop/staticfiles/;
    }

    location / {
        proxy_pass http://unix:/run/gunicorn.sock;
    }

    client_max_body_size 100M;  # Лимит на размер загружаемых файлов
}
```

#### Gunicorn

Настройте сервис Gunicorn для автоматического запуска:

```bash
sudo nano /etc/systemd/system/gunicorn.service
```

Пример конфигурации:

```ini
[Unit]
Description=gunicorn daemon
After=network.target

[Service]
User=root
Group=www-data
WorkingDirectory=/root/gameshop
ExecStart=/root/gameshop/venv/bin/gunicorn --workers 3 --bind unix:/run/gunicorn.sock base.wsgi:application

[Install]
WantedBy=multi-user.target
```

После настройки перезапустите сервисы:

```bash
sudo systemctl daemon-reload
sudo systemctl start gunicorn
sudo systemctl enable gunicorn
sudo systemctl restart nginx
```


## Использование
Не забудьте добавить в ALLOWED_HOSTS файла base/settings.py ваш IP. (И включить/выключить debug)

После успешного деплоя сайта, вы можете:

1. Перейти по адресу http://YOUR_SERVER_IP/shop для просмотра главной страницы сайта.
2. Перейти по адресу http://YOUR_SERVER_IP/admin для доступа к административной панели.
3. Перейти по адресу http://YOUR_SERVER_IP/api для доступа к api.
3. Чтобы добавить игру на сайт, необходимо в админ панели сначала добавить категорию (жанр) игры, затем добавить игру, заполняя соответствующие поля формы. 
После добавления, игры можно редактировать, менять название, цену, описание, рейтинг и т.д. (Ключевые слова для цветового обозначения рейтинга заданы в gameshop\shop\models.py) модели game.)
4. Админ может осуществлять администрирование игр, категорий, пользователей и комментариев, а также получать полный доступ к api проекта (только просмотр, отправка post запросов через api в разработке).
5. Пользователь может:
-зарегистрироваться
-изменить свои данные в профиле
-оставить или удалить свой комментарий
-добавить игру в корзину
-узнать сумму товаров в корзине
-имитировать покупку и получить ключ от игры (как на самой странице, так и получить ключ на странице профиля)
-получить через api данные о играх и категориях

### Настройки

- **Название сайта в браузере:** Для изменения заголовка страницы в браузере, обновите шаблон `base.html`, расположенный в директории `templates`.
  
- **Главная страница сайта:** Ссылка "View Site" в админ-панели перенаправляет на URL `/shop`. Для изменения этого пути обновите шаблон `admin/base_site.html`.

- **Выбор популярных игр** Необходимо ввести ID игры вручную в файл gameshop\shop\views.py в список featured_games.



### Решение проблем

- **413 Request Entity Too Large:** Если вы получаете ошибку при загрузке файлов при добавлении игр, увеличьте лимит `client_max_body_size` в конфигурации Nginx.
- После изменения названия уже созданной игры - не загружается картинка. Эта ошибка возникает из-за того, что картинка ищется по новому названию, но сохранена под старым - чтобы решить - загрузите картинку заново в поля формы.

### Список страниц

1. http://YOUR_SERVER_IP/shop для просмотра главной страницы сайта.
2. http://YOUR_SERVER_IP/admin для доступа к административной панели.
3. http://YOUR_SERVER_IP/profile для доступа к профилю пользователя
4. http://YOUR_SERVER_IP/shop/game_list для доступа каталогу игр
5. http://YOUR_SERVER_IP/shop/shop:GAME_ID для просмотра страницы конкретной игры (а также комментариев к ней).
6. http://YOUR_SERVER_IP/cart для доступа к корзине
7. http://YOUR_SERVER_IP/registration/login для авторизации
8. http://YOUR_SERVER_IP/registration/api для доступа к api



### Проблемы и дальнейшее развитие проекта
1. Этот проект был разработан в первую очередь с целью практики и улучшения навыков программирования backend на Django. Отсюда у проекта есть очевидные проблемы с frontend частью приложения (простой дизайн,
низкокачественная верстка, полное отсутствие адаптации под мобильные устройства). Я признаю эти проблемы, но считаю что мне стоит сконцентрироваться  на улучшении именно backend части проекта. Далее перечислю идеи по развитию проекта.
2. Создание отдельной модели для учета ключей (чтобы "покупка" уменьшала общее количество ключей) - и в целом, создание бухгалтерии, чтобы админ мог видеть количество "проданных" ключей и "полученных" денег.
3. Доработка api приложения, чтобы админ имел возможность добавлять игры и категории post запросами.
4. Улучшение возможностей админа по редакции игр (больше картинок, дополнительные поля для информации об игре), как максимум - разработка возможности редакции админом страницы игры прямо на ней.
5. Разработка мини приложения для общего контроля за ценами, удобного создания различных распродаж и скидок.


## Лицензия

Этот проект лицензирован под [MIT License](LICENSE).

---
